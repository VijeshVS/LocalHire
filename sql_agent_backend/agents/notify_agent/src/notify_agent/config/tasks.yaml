query_task:
  description: >
    Based on the job description, generate the SQL query which returns the list of employees.

    Job Description: {input}

    Job Location: {lat} Latitude, {long} Longitude

    IMPORTANT RULES (These steps must not be skipped):

    1. First understand the job description requirements carefully. Understand what kind of employees are needed.

    2. Before executing any SQL queries, you must fully understand which tables are available using list_tables tool.

    3. Before querying any table first fully understand the schema of the table using get_table_schema tool.

    4. (Important Step) When applying filters using WHERE, IN, or LIKE, the agent must not 
    assume or invent filter keywords directly from the user's text. Instead, it must:

      4a. Identify all distinct values from the relevant column(s) in the database 
      (e.g., SELECT DISTINCT column FROM table).
      
      4b. Determine which of these values are semantically closest to the user's 
      request (based on meaning, not substring matching).
      
      4c. Apply the filter only using those existing distinct values, not fabricated 
      or guessed ones.
      
      4d. The filter must use only actual distinct values already present in the database.
      
      4e. Never invent or assume keywords that do not exist in the column.
      
      4f. All keyword filtering must be case-sensitive.

      4g. After identifying the set of semantically closest distinct values for each relevant column (as per 4a to 4f), the final SQL query must apply all identified values for their respective columns.

    5. When querying through the tool to explore or retrieve employee table records, strictly you must always apply 
    LIMIT <= 15 to prevent fetching excessive data.
    
    6. Please note that LIMIT should be used only when exploring or retrieving records from the employee table. You can
    retrieve information from other tables without applying any LIMIT.

    7. If the job description doesn't specify the radius within which it needs employees, strictly
    filter employees within 10km of the job location given.

    8. The query must be strictly read-only â€” no INSERT, UPDATE, DELETE, TRUNCATE, or any operation 
    that modifies data. Only retrieval is allowed.
  expected_output: >
    Strictly output SQL query to get DISTINCT employees with attributes id, name, email, phone, years_of_experience, 
    language, rating, location, distance_m from the employees table.

    distance_m is the calculated distance in meters from the job location to the employee location.

    Do not include any newline characters, escape sequences (such as \n or \t), extra whitespace, formatting characters, 
    comments, or explanatory text in final sql query.

    Do not provide any explanation or additional text, output only the SQL query.
  agent: query_agent
  output_file: output.txt